# Makefile Argument Passing Examples
# This file demonstrates various ways to pass arguments to make targets

.PHONY: example-all

# ==============================================================================
# METHOD 1: Using Variables (Most Common)
# ==============================================================================
# Usage: make example-var N=3
# Default value if not provided: N ?= 1

N ?= 1  # Default value

example-var:
	@echo "Running with N=$(N) models"
	@go run scripts/test_examples_matrix/main.go -n $(N)

# ==============================================================================
# METHOD 2: Multiple Variables
# ==============================================================================
# Usage: make example-multi N=3 V=true P=false

N ?= 1
V ?= false
P ?= true

example-multi:
	@echo "N=$(N), Verbose=$(V), Parallel=$(P)"
	@go run scripts/test_examples_matrix/main.go -n $(N) -v=$(V) -p=$(P)

# ==============================================================================
# METHOD 3: Conditional Logic Based on Variables
# ==============================================================================
# Usage: make example-conditional MODE=fast
# Options: MODE=fast, MODE=thorough, MODE=full

MODE ?= fast

example-conditional:
ifeq ($(MODE),fast)
	@echo "Fast mode: 1 model"
	@go run scripts/test_examples_matrix/main.go -n 1
else ifeq ($(MODE),thorough)
	@echo "Thorough mode: 3 random models"
	@go run scripts/test_examples_matrix/main.go -n 3
else ifeq ($(MODE),full)
	@echo "Full mode: all models"
	@go run scripts/test_examples_matrix/main.go -n 0
else
	@echo "Unknown mode: $(MODE). Use fast, thorough, or full"
	@exit 1
endif

# ==============================================================================
# METHOD 4: Using ARGS Variable (Pass-through arguments)
# ==============================================================================
# Usage: make example-args ARGS="-n 3 -v -timeout=5m"

ARGS ?=

example-args:
	@echo "Running with custom args: $(ARGS)"
	@go run scripts/test_examples_matrix/main.go $(ARGS)

# ==============================================================================
# METHOD 5: Environment Variables
# ==============================================================================
# Usage: OPENROUTER_MODEL=gpt-4 make example-env

example-env:
	@echo "Using environment OPENROUTER_MODEL=$(OPENROUTER_MODEL)"
	@go run scripts/test_examples_matrix/main.go -n 1

# ==============================================================================
# METHOD 6: Combining with Shell Variables
# ==============================================================================
# Usage: make example-shell N=5

example-shell:
	@CUSTOM_VAR="test-$(N)"; \
	echo "Running with N=$(N), CUSTOM_VAR=$$CUSTOM_VAR"; \
	go run scripts/test_examples_matrix/main.go -n $(N)

# ==============================================================================
# METHOD 7: Predefined Shortcuts (Recommended Pattern)
# ==============================================================================

# Quick test with 1 model
quick:
	@go run scripts/test_examples_matrix/main.go -n 1

# Moderate test with 3 models
moderate:
	@go run scripts/test_examples_matrix/main.go -n 3

# Full test with all models
full:
	@go run scripts/test_examples_matrix/main.go -n 0

# Verbose mode
quick-v:
	@go run scripts/test_examples_matrix/main.go -n 1 -v

# Sequential mode
quick-seq:
	@go run scripts/test_examples_matrix/main.go -n 1 -p=false

# ==============================================================================
# METHOD 8: Help Target with Variable Documentation
# ==============================================================================

help:
	@echo "Available targets:"
	@echo "  make example-var N=<num>         - Test with N models (default: 1)"
	@echo "  make example-multi N=3 V=true    - Test with multiple flags"
	@echo "  make example-conditional MODE=<mode> - fast|thorough|full"
	@echo "  make example-args ARGS='...'     - Pass custom arguments"
	@echo "  make quick                       - Quick test (1 model)"
	@echo "  make moderate                    - Moderate test (3 models)"
	@echo "  make full                        - Full test (all models)"
	@echo ""
	@echo "Examples:"
	@echo "  make example-var N=3"
	@echo "  make example-multi N=5 V=true P=false"
	@echo "  make example-conditional MODE=thorough"
	@echo "  make example-args ARGS='-n 3 -v -timeout=5m'"
	@echo "  OPENROUTER_MODEL=gpt-4 make example-env"
